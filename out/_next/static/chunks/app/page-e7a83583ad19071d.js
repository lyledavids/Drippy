(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3949:function(e,t,a){Promise.resolve().then(a.bind(a,7536))},7536:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eC}});var s=a(288),r=a(5192),n=a(432),l=a(7940),i=a(9773),o=a(7009);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.m6)((0,i.W)(t))}let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:i=!1,...o}=e,u=i?n.g7:"button";return(0,s.jsx)(u,{className:d(c({variant:r,size:l,className:a})),ref:t,...o})});u.displayName="Button";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});p.displayName="Card";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",a),...r})});m.displayName="CardHeader";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",a),...r})});x.displayName="CardTitle";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",a),...r})});f.displayName="CardDescription";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:d("p-6 pt-0",a),...r})});h.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var g=a(3238),y=a(8697);function b(e){let{onConnect:t}=e,[a,n]=(0,r.useState)(!1),l=async()=>{n(!0);try{if(void 0!==window.ethereum){let e=await window.ethereum.request({method:"eth_requestAccounts"});t(e[0])}else alert("Please install MetaMask!")}catch(e){console.error("Error connecting wallet:",e)}finally{n(!1)}};return(0,s.jsxs)(p,{className:"w-full max-w-md bg-white/80 backdrop-blur-sm border-0 shadow-2xl",children:[(0,s.jsxs)(m,{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(g.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)(x,{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Welcome to Drippy"}),(0,s.jsx)(f,{className:"text-lg text-gray-600",children:"The next generation social platform powered by Web3"})]}),(0,s.jsxs)(h,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Own your content and data"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-pink-50 to-orange-50 rounded-lg",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-pink-500 rounded-full"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Tip creators directly"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-orange-50 to-purple-50 rounded-lg",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Decentralized and censorship-resistant"})]})]}),(0,s.jsxs)(u,{onClick:l,disabled:a,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 rounded-xl transition-all duration-200 transform hover:scale-105",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5 mr-2"}),a?"Connecting...":"Connect Wallet"]})]})]})}let w=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});w.displayName="Input";var N=a(7188);let v=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.f,{ref:t,className:d(v(),a),...r})});j.displayName=N.f.displayName;let C=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:d("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});C.displayName="Textarea";var T=a(3057);let k=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.fC,{ref:t,className:d("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});k.displayName=T.fC.displayName;let S=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.Ee,{ref:t,className:d("aspect-square h-full w-full",a),...r})});S.displayName=T.Ee.displayName;let D=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.NY,{ref:t,className:d("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});D.displayName=T.NY.displayName;var P=a(7393),I=a(351);let F={CONTRACT_ADDRESS:"0x8507bFBB94499baA164df9f283188F4dd7Ac39aF",PINATA_JWT:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiJhMWM1M2UzMS04ZTc1LTQwNjItYWY4Ni0yMzhhMmRkODA5ZjEiLCJlbWFpbCI6Imx5bGVkc2FAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBpbl9wb2xpY3kiOnsicmVnaW9ucyI6W3siZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiRlJBMSJ9LHsiZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiTllDMSJ9XSwidmVyc2lvbiI6MX0sIm1mYV9lbmFibGVkIjpmYWxzZSwic3RhdHVzIjoiQUNUSVZFIn0sImF1dGhlbnRpY2F0aW9uVHlwZSI6InNjb3BlZEtleSIsInNjb3BlZEtleUtleSI6Ijg2MDkxZDVkMDRiMmRkNWQwZGYyIiwic2NvcGVkS2V5U2VjcmV0IjoiMTViMmM0ZDNmMjAzYzVlNDg0OWI0NzVlOTM2NzA2ZmQ4N2IwNGEwYjNjNWJkYTFkYzA3MDcwNjZiOTljZmY3YyIsImV4cCI6MTc4NjM3MTgxM30.Efz35ST1G727xK16azx3UmAGptvSofjYm6NbF6ptC4U",NETWORK_NAME:"Citrea",CHAIN_ID:5115};async function A(e){if(console.log("Starting Pinata upload for file:",e.name,"Size:",e.size),!F.PINATA_JWT)throw Error("Pinata JWT token not configured");let t=new FormData;t.append("network","public"),t.append("file",e),t.append("name","drippy-".concat(e.name,"-").concat(Date.now())),console.log("Uploading to Pinata as PUBLIC with JWT:",F.PINATA_JWT.substring(0,10)+"...");let a=await fetch("https://uploads.pinata.cloud/v3/files",{method:"POST",headers:{Authorization:"Bearer ".concat(F.PINATA_JWT)},body:t});if(console.log("Pinata response status:",a.status),!a.ok){let e=await a.text();throw console.error("Pinata upload failed:",e),Error("Failed to upload to Pinata: ".concat(a.status," ").concat(e))}let s=await a.json();return console.log("Pinata upload successful (PUBLIC):",s),s.data&&(console.log("File ID:",s.data.id),console.log("File should be public - testing access..."),setTimeout(async()=>{try{let e=await R(s.data.id);console.log("✅ File info accessible:",e)}catch(e){console.error("❌ File info not accessible:",e)}},1e3)),s.data.id}async function R(e){if(!F.PINATA_JWT)throw Error("Pinata JWT token not configured");console.log("Fetching file info for ID:",e);let t="https://api.pinata.cloud/v3/files/public/".concat(e),a={method:"GET",headers:{Authorization:"Bearer ".concat(F.PINATA_JWT)}};try{console.log("Making request to:",t);let e=await fetch(t,a);if(console.log("File info response status:",e.status),!e.ok){let t=await e.text();throw console.error("File info fetch failed:",e.status,t),Error("Failed to fetch file info: ".concat(e.status," - ").concat(t))}let s=await e.json();if(console.log("File info fetched successfully:",s),!s.data||!s.data.cid)throw console.error("Invalid file info response:",s),Error("Invalid file info response - missing CID");return s.data}catch(t){throw console.error("Error fetching file info for ID:",e,t),t}}async function E(e){try{if(console.log("Getting display URL for file ID:",e),!e||""===e.trim())return console.log("Empty file ID provided"),null;let t=await R(e);if(!t.cid)return console.error("No CID found in file info:",t),null;let a=function(e){let t="https://rose-causal-catshark-554.mypinata.cloud/ipfs/".concat(e);return console.log("Generated Pinata URL:",t),t}(t.cid);return console.log("✅ Display URL generated:",a),a}catch(t){return console.error("❌ Error getting display URL for file ID:",e,t),null}}async function U(e){try{return await R(e),console.log("File access check passed for:",e),!0}catch(t){return console.error("File access check failed for:",e,t),!1}}var H=a(9034),M=a(5428),Z=a(1564),_=a(8526);let W=[{inputs:[{internalType:"string",name:"text",type:"string"},{internalType:"string",name:"contentIPFSHash",type:"string"}],name:"createPost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"bio",type:"string"},{internalType:"string",name:"avatarIPFSHash",type:"string"}],name:"createProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userToFollow",type:"address"}],name:"follow",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"follower",type:"address"},{indexed:!0,internalType:"address",name:"followee",type:"address"}],name:"Followed",type:"event"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"likePost",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"author",type:"address"},{indexed:!1,internalType:"string",name:"text",type:"string"},{indexed:!1,internalType:"string",name:"contentIPFSHash",type:"string"}],name:"PostCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"liker",type:"address"}],name:"PostLiked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"postId",type:"uint256"},{indexed:!0,internalType:"address",name:"unliker",type:"address"}],name:"PostUnliked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"string",name:"username",type:"string"}],name:"ProfileCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"string",name:"username",type:"string"}],name:"ProfileUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Tipped",type:"event"},{inputs:[{internalType:"address payable",name:"user",type:"address"}],name:"tipUser",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"userToUnfollow",type:"address"}],name:"unfollow",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"follower",type:"address"},{indexed:!0,internalType:"address",name:"followee",type:"address"}],name:"Unfollowed",type:"event"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"unlikePost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"bio",type:"string"},{internalType:"string",name:"avatarIPFSHash",type:"string"}],name:"updateProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"}],name:"getPost",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"author",type:"address"},{internalType:"string",name:"text",type:"string"},{internalType:"string",name:"contentIPFSHash",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"likeCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getPostsByUser",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getProfile",outputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"bio",type:"string"},{internalType:"string",name:"avatarIPFSHash",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"postId",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"hasLiked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"follower",type:"address"},{internalType:"address",name:"followee",type:"address"}],name:"isFollowing",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];class z extends H.Q{async resolveName(e){return M.UJ(e)?e:null}async lookupAddress(e){return null}}function O(){if(window.ethereum)return new z(window.ethereum);throw Error("No Web3 provider found")}async function L(){let e=O();return await e.getSigner()}F.CONTRACT_ADDRESS,F.PINATA_JWT,M.UJ(F.CONTRACT_ADDRESS),F.NETWORK_NAME,F.CHAIN_ID;let J={async createProfile(e,t,a){try{console.log("Creating profile with contract address:",F.CONTRACT_ADDRESS),console.log("Is valid address:",M.UJ(F.CONTRACT_ADDRESS));let s=await L(),r=new Z.CH(F.CONTRACT_ADDRESS,W,s);console.log("Calling createProfile with:",{username:e,bio:t,avatarIPFSHash:a});let n=await r.createProfile(e,t,a);console.log("Transaction sent:",n.hash);let l=await n.wait();return console.log("Transaction confirmed:",l),l}catch(e){throw console.error("Contract call failed:",e),e}},async getProfile(e){try{let t=O(),a=new Z.CH(F.CONTRACT_ADDRESS,W,t),[s,r,n]=await a.getProfile(e);return{username:s,bio:r,avatarIPFSHash:n}}catch(t){return console.log("Profile not found for address:",e),null}},async createPost(e,t){try{let a=await L(),s=new Z.CH(F.CONTRACT_ADDRESS,W,a);console.log("Calling createPost with:",{text:e,contentIPFSHash:t});let r=await s.createPost(e,t);console.log("Transaction sent:",r.hash);let n=await r.wait();return console.log("Transaction confirmed:",n),n}catch(e){throw console.error("Contract call failed:",e),e}},async getPost(e){try{let t=O(),a=new Z.CH(F.CONTRACT_ADDRESS,W,t),[s,r,n,l,i,o]=await a.getPost(e);return{id:Number(s),author:r,text:n,contentIPFSHash:l,timestamp:Number(i),likeCount:Number(o)}}catch(e){return null}},async getPostsByUser(e){try{let t=O(),a=new Z.CH(F.CONTRACT_ADDRESS,W,t);return(await a.getPostsByUser(e)).map(e=>Number(e))}catch(e){return[]}},async likePost(e){try{let t=await L(),a=new Z.CH(F.CONTRACT_ADDRESS,W,t),s=await a.likePost(e);return await s.wait()}catch(e){throw console.error("Like post failed:",e),e}},async unlikePost(e){try{let t=await L(),a=new Z.CH(F.CONTRACT_ADDRESS,W,t),s=await a.unlikePost(e);return await s.wait()}catch(e){throw console.error("Unlike post failed:",e),e}},async hasLiked(e,t){try{let a=O(),s=new Z.CH(F.CONTRACT_ADDRESS,W,a);return await s.hasLiked(e,t)}catch(e){return!1}},async follow(e){try{let t=await L(),a=new Z.CH(F.CONTRACT_ADDRESS,W,t),s=await a.follow(e);return await s.wait()}catch(e){throw console.error("Follow failed:",e),e}},async unfollow(e){try{let t=await L(),a=new Z.CH(F.CONTRACT_ADDRESS,W,t),s=await a.unfollow(e);return await s.wait()}catch(e){throw console.error("Unfollow failed:",e),e}},async isFollowing(e,t){try{let a=O(),s=new Z.CH(F.CONTRACT_ADDRESS,W,a);return await s.isFollowing(e,t)}catch(e){return!1}},async tipUser(e,t){try{let a=await L(),s=new Z.CH(F.CONTRACT_ADDRESS,W,a),r=await s.tipUser(e,{value:_.fi(t)});return await r.wait()}catch(e){throw console.error("Tip failed:",e),e}}};var V=a(2061);function Y(e){let{userAddress:t,onProfileCreated:a}=e,[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(null),[g,y]=(0,r.useState)(""),[b,N]=(0,r.useState)(!1),[v,T]=(0,r.useState)(""),F=async()=>{if(!n.trim()){T("Username is required");return}N(!0),T("");try{let e="";d&&(console.log("Uploading avatar to Pinata..."),e=await A(d),console.log("Avatar uploaded successfully:",e)),console.log("Creating profile on blockchain..."),console.log("Contract address:",V.env.NEXT_PUBLIC_CONTRACT_ADDRESS),console.log("User address:",t),console.log("Profile data:",{username:n,bio:i,avatarHash:e}),await J.createProfile(n,i,e),console.log("Profile created successfully!"),a()}catch(t){var e,s;console.error("Error creating profile:",t),(null===(e=t.message)||void 0===e?void 0:e.includes("user rejected"))?T("Transaction was rejected"):(null===(s=t.message)||void 0===s?void 0:s.includes("insufficient funds"))?T("Insufficient funds for transaction"):t.reason?T("Contract error: ".concat(t.reason)):T(t.message||"Failed to create profile")}finally{N(!1)}};return(0,s.jsxs)(p,{className:"w-full max-w-lg bg-white/80 backdrop-blur-sm border-0 shadow-2xl",children:[(0,s.jsxs)(m,{className:"text-center",children:[(0,s.jsx)(x,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Create Your Profile"}),(0,s.jsx)(f,{children:"Set up your Drippy profile to start sharing and connecting"})]}),(0,s.jsxs)(h,{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col items-center space-y-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(k,{className:"w-24 h-24 border-4 border-gradient-to-r from-purple-500 to-pink-500",children:[(0,s.jsx)(S,{src:g||"/placeholder.svg"}),(0,s.jsx)(D,{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:(0,s.jsx)(P.Z,{className:"w-8 h-8 text-purple-500"})})]}),(0,s.jsxs)("label",{className:"absolute bottom-0 right-0 bg-gradient-to-r from-purple-500 to-pink-500 text-white p-2 rounded-full cursor-pointer hover:scale-110 transition-transform",children:[(0,s.jsx)(I.Z,{className:"w-4 h-4"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){c(a);let e=new FileReader;e.onload=e=>{var t;y(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(a)}},className:"hidden"})]})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"username",children:"Username"}),(0,s.jsx)(w,{id:"username",placeholder:"Enter your username",value:n,onChange:e=>l(e.target.value),className:"border-2 border-purple-100 focus:border-purple-300"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"bio",children:"Bio"}),(0,s.jsx)(C,{id:"bio",placeholder:"Tell us about yourself...",value:i,onChange:e=>o(e.target.value),className:"border-2 border-purple-100 focus:border-purple-300 min-h-[100px]"})]})]}),v&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:v}),(0,s.jsx)(u,{onClick:F,disabled:!n.trim()||b,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 rounded-xl transition-all duration-200 transform hover:scale-105",children:b?"Creating Profile...":"Create Profile"})]})]})}var B=a(5635),G=a(1441),Q=a(8566),X=a(711),q=a(3637),K=a(8357),$=a(8747),ee=a(5189),et=a(1207);let ea=ee.fC;ee.xz;let es=ee.h_;ee.x8;let er=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ee.aV,{ref:t,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});er.displayName=ee.aV.displayName;let en=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(es,{children:[(0,s.jsx)(er,{}),(0,s.jsxs)(ee.VY,{ref:t,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(ee.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(et.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});en.displayName=ee.VY.displayName;let el=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};el.displayName="DialogHeader";let ei=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ee.Dx,{ref:t,className:d("text-lg font-semibold leading-none tracking-tight",a),...r})});ei.displayName=ee.Dx.displayName;let eo=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ee.dk,{ref:t,className:d("text-sm text-muted-foreground",a),...r})});function ed(e){var t;let{isOpen:a,onClose:n,recipientAddress:l,recipientUsername:i}=e,[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),g=async()=>{if(!o||0>=Number.parseFloat(o)){x("Please enter a valid amount");return}p(!0),x("");try{await J.tipUser(l,o),h(!0),setTimeout(()=>{n(),h(!1),d("")},2e3)}catch(e){console.error("Error sending tip:",e),x(e.message||"Failed to send tip")}finally{p(!1)}},y=()=>{c||(n(),d(""),x(""),h(!1))};return(0,s.jsx)(ea,{open:a,onOpenChange:y,children:(0,s.jsxs)(en,{className:"sm:max-w-md",children:[(0,s.jsxs)(el,{children:[(0,s.jsxs)(ei,{className:"flex items-center space-x-2",children:[(0,s.jsx)(K.Z,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsx)("span",{children:"Send a Tip"})]}),(0,s.jsxs)(eo,{children:["Show your appreciation by sending CBTC to @",i]})]}),f?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(Q.Z,{className:"w-8 h-8 text-green-500 fill-current"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"Tip Sent Successfully!"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Your tip of ",o," CBTC has been sent to @",i]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[(0,s.jsxs)(k,{className:"w-10 h-10",children:[(0,s.jsx)(S,{src:"/placeholder.svg"}),(0,s.jsx)(D,{className:"bg-purple-100 text-purple-600",children:null===(t=i[0])||void 0===t?void 0:t.toUpperCase()})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:["@",i]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[l.slice(0,6),"...",l.slice(-4)]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j,{htmlFor:"amount",children:"Amount (CBTC)"}),(0,s.jsx)(w,{id:"amount",type:"number",step:"0.001",placeholder:"0.01",value:o,onChange:e=>d(e.target.value),className:"text-lg"})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["0.001","0.01","0.1","1"].map(e=>(0,s.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>d(e),className:"text-sm",children:[e," CBTC"]},e))}),m&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:m}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(u,{variant:"outline",onClick:y,disabled:c,className:"flex-1 bg-transparent",children:"Cancel"}),(0,s.jsx)(u,{onClick:g,disabled:!o||0>=Number.parseFloat(o)||c,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:c?"Sending...":"Send ".concat(o||"0"," CBTC")})]})]})]})]})})}function ec(e){var t;let{post:a,userAddress:n}=e,[l,i]=(0,r.useState)(a.isLiked),[o,d]=(0,r.useState)(a.likeCount),[c,m]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[N,v]=(0,r.useState)(!1),[j,C]=(0,r.useState)(0);(0,r.useEffect)(()=>{a.contentIPFSHash&&T()},[a.contentIPFSHash]);let T=async()=>{if(a.contentIPFSHash){v(!0),y(!1);try{if(console.log("\uD83D\uDD04 Loading media for post ".concat(a.id,", file ID:"),a.contentIPFSHash),!await U(a.contentIPFSHash)){console.error("❌ File ".concat(a.contentIPFSHash," is not accessible (may be private)")),y(!0);return}let e=await E(a.contentIPFSHash);e?(w(e),console.log("✅ Media URL loaded for post ".concat(a.id,":"),e)):(console.error("❌ Could not generate display URL for post ".concat(a.id)),y(!0))}catch(e){console.error("❌ Error loading media for post ".concat(a.id,":"),e),y(!0)}finally{v(!1)}}},P=async()=>{if(!x){f(!0);try{l?(i(!1),d(e=>e-1),await J.unlikePost(a.id)):(i(!0),d(e=>e+1),await J.likePost(a.id))}catch(e){console.error("Error toggling like:",e),i(l),d(o)}finally{f(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-2xl overflow-hidden",children:(0,s.jsx)(h,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)(k,{className:"w-12 h-12 border-2 border-purple-200",children:[(0,s.jsx)(S,{src:a.avatar||"/placeholder.svg"}),(0,s.jsx)(D,{className:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-600",children:(null===(t=a.username[0])||void 0===t?void 0:t.toUpperCase())||"U"})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold text-gray-900",children:["@",a.username]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:(0,$.Q)(new Date(1e3*a.timestamp),{addSuffix:!0})})]}),(0,s.jsx)(u,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(B.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("p",{className:"text-gray-800 leading-relaxed",children:a.text}),a.contentIPFSHash&&N&&(0,s.jsxs)("div",{className:"rounded-xl overflow-hidden bg-gray-100 p-8 text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Loading media from IPFS..."}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["File ID: ",a.contentIPFSHash]})]}),a.contentIPFSHash&&b&&!g&&!N&&(0,s.jsx)("div",{className:"rounded-xl overflow-hidden bg-gray-100",children:(0,s.jsx)("img",{src:b||"/placeholder.svg",alt:"Post content",className:"w-full max-h-96 object-cover",onError:()=>{console.error("❌ Image failed to load for post ".concat(a.id,":"),b),y(!0)},onLoad:()=>console.log("✅ Image loaded successfully for post ".concat(a.id,":"),b)})}),a.contentIPFSHash&&(g||!b&&!N)&&(0,s.jsxs)("div",{className:"rounded-xl overflow-hidden bg-gray-100 p-4 text-center border-2 border-dashed border-gray-300",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:"\uD83D\uDCCE Media content (IPFS)"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mb-3 font-mono break-all",children:["File ID: ",a.contentIPFSHash]}),(0,s.jsx)("p",{className:"text-xs text-red-500 mb-3",children:g?"Failed to load media (file may be private)":"Media not loaded"}),(0,s.jsx)("div",{className:"flex gap-2 justify-center",children:(0,s.jsxs)(u,{size:"sm",variant:"outline",onClick:()=>{C(e=>e+1),console.log("\uD83D\uDD04 Retrying media load for post ".concat(a.id," (attempt ").concat(j+1,")")),T()},className:"text-xs bg-transparent",children:[(0,s.jsx)(G.Z,{className:"w-3 h-3 mr-1"}),"Retry (",j,")"]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsxs)(u,{variant:"ghost",size:"sm",onClick:P,disabled:x,className:"flex items-center space-x-2 ".concat(l?"text-red-500 hover:text-red-600":"text-gray-500 hover:text-red-500"),children:[(0,s.jsx)(Q.Z,{className:"w-5 h-5 ".concat(l?"fill-current":"")}),(0,s.jsx)("span",{children:o})]}),(0,s.jsxs)(u,{variant:"ghost",size:"sm",className:"flex items-center space-x-2 text-gray-500 hover:text-blue-500",children:[(0,s.jsx)(X.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Reply"})]}),(0,s.jsxs)(u,{variant:"ghost",size:"sm",className:"flex items-center space-x-2 text-gray-500 hover:text-green-500",children:[(0,s.jsx)(q.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Share"})]})]}),a.author!==n&&(0,s.jsxs)(u,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"flex items-center space-x-2 text-gray-500 hover:text-yellow-500 bg-gradient-to-r from-yellow-50 to-orange-50 hover:from-yellow-100 hover:to-orange-100 rounded-full px-4",children:[(0,s.jsx)(K.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Tip"})]})]})]})]})})}),(0,s.jsx)(ed,{isOpen:c,onClose:()=>m(!1),recipientAddress:a.author,recipientUsername:a.username})]})}function eu(e){let{userAddress:t,refreshTrigger:a}=e,[n,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[t,a]);let d=async()=>{o(!0);try{let e=[];for(let a=1;a<=20;a++)try{let s=await J.getPost(a);if(s){let a=await J.getProfile(s.author),r=await J.hasLiked(s.id,t),n="";if(null==a?void 0:a.avatarIPFSHash)try{n=await E(a.avatarIPFSHash)||""}catch(e){console.log("Could not load avatar for user:",a.username)}e.push({id:s.id,author:s.author,username:(null==a?void 0:a.username)||"User".concat(s.author.slice(-4)),avatar:n,text:s.text,contentIPFSHash:s.contentIPFSHash,timestamp:s.timestamp,likeCount:s.likeCount,isLiked:r})}}catch(e){continue}e.sort((e,t)=>t.timestamp-e.timestamp),l(e)}catch(e){console.error("Error loading posts:",e)}finally{o(!1)}};return i?(0,s.jsx)("div",{className:"space-y-6",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 animate-pulse",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded-xl"})]})]})},e))}):0===n.length?(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-12 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDD"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No posts yet"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Be the first to share something amazing!"})]}):(0,s.jsx)("div",{className:"space-y-6",children:n.map(e=>(0,s.jsx)(ec,{post:e,userAddress:t},e.id))})}eo.displayName=ee.dk.displayName;var ep=a(6025),em=a(4514),ex=a(5887),ef=a(3410);function eh(e){let{userAddress:t,onPostCreated:a}=e,[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[f,g]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),w=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){o(a);let e=new FileReader;e.onload=e=>{var t;c(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(a)}},N=async()=>{if(n.trim()||i){x(!0),g(""),b(!1);try{let e="";if(i){if(console.log("\uD83D\uDD04 Uploading media to Pinata..."),e=await A(i),console.log("✅ Media uploaded successfully with ID:",e),console.log("\uD83D\uDD0D Verifying file access..."),!await U(e))throw Error("Uploaded file is not accessible - may be private");console.log("✅ File is publicly accessible")}console.log("\uD83D\uDD04 Creating post on blockchain..."),await J.createPost(n,e),console.log("✅ Post created successfully on blockchain!"),l(""),o(null),c(""),b(!0),a(),setTimeout(()=>b(!1),3e3)}catch(a){var e,t,s;console.error("❌ Error creating post:",a),(null===(e=a.message)||void 0===e?void 0:e.includes("user rejected"))?g("Transaction was rejected"):(null===(t=a.message)||void 0===t?void 0:t.includes("insufficient funds"))?g("Insufficient funds for transaction"):(null===(s=a.message)||void 0===s?void 0:s.includes("not accessible"))?g("File upload failed - file may be private. Please try again."):a.reason?g("Contract error: ".concat(a.reason)):g(a.message||"Failed to create post")}finally{x(!1)}}};return(0,s.jsx)(p,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:(0,s.jsx)(h,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)(k,{className:"w-12 h-12 border-2 border-purple-200",children:[(0,s.jsx)(S,{src:"/placeholder-user.jpg"}),(0,s.jsx)(D,{className:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-600",children:"U"})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,s.jsx)(C,{placeholder:"What's happening in your world?",value:n,onChange:e=>l(e.target.value),className:"border-0 resize-none text-lg placeholder:text-gray-400 focus-visible:ring-0 bg-transparent",rows:3}),d&&(0,s.jsxs)("div",{className:"relative rounded-xl overflow-hidden",children:[(null==i?void 0:i.type.startsWith("image/"))?(0,s.jsx)("img",{src:d||"/placeholder.svg",alt:"Preview",className:"w-full max-h-64 object-cover"}):(0,s.jsx)("video",{src:d,className:"w-full max-h-64 object-cover",controls:!0}),(0,s.jsx)("button",{onClick:()=>{o(null),c("")},className:"absolute top-2 right-2 bg-black/50 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-black/70",children:"\xd7"})]}),f&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:f}),y&&(0,s.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:"\uD83C\uDF89 Post created successfully! Media is publicly accessible."}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("label",{className:"p-2 text-purple-500 hover:bg-purple-50 rounded-full cursor-pointer transition-colors",children:[(0,s.jsx)(ep.Z,{className:"w-5 h-5"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:w,className:"hidden"})]}),(0,s.jsxs)("label",{className:"p-2 text-purple-500 hover:bg-purple-50 rounded-full cursor-pointer transition-colors",children:[(0,s.jsx)(em.Z,{className:"w-5 h-5"}),(0,s.jsx)("input",{type:"file",accept:"video/*",onChange:w,className:"hidden"})]}),(0,s.jsx)("button",{className:"p-2 text-purple-500 hover:bg-purple-50 rounded-full transition-colors",children:(0,s.jsx)(ex.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)(u,{onClick:N,disabled:!n.trim()&&!i||m,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-full px-6",children:[(0,s.jsx)(ef.Z,{className:"w-4 h-4 mr-2"}),m?"Posting...":"Post"]})]})]})]})})})}function eg(e){let{userAddress:t,profileData:a}=e,r={username:(null==a?void 0:a.username)||"Loading...",bio:(null==a?void 0:a.bio)||"Web3 enthusiast and creator",avatar:(null==a?void 0:a.avatarIPFSHash)?"https://api.pinata.cloud/v3/files/public/".concat(a.avatarIPFSHash):"/placeholder.svg"};return(0,s.jsx)(p,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg rounded-2xl overflow-hidden",children:(0,s.jsx)(m,{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white p-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsxs)(k,{className:"w-20 h-20 border-4 border-white shadow-lg",children:[(0,s.jsx)(S,{src:r.avatar||"/placeholder.svg"}),(0,s.jsx)(D,{className:"bg-white text-purple-600 text-xl font-bold",children:r.username[0].toUpperCase()})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold",children:["@",r.username]}),(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:r.bio})]})]})})})}var ey=a(4396),eb=a(5412);function ew(e){let{userAddress:t}=e,a=[{icon:ey.Z,label:"Home",active:!0},{icon:P.Z,label:"Profile"},{icon:eb.Z,label:"Notifications"}];return(0,s.jsxs)("div",{className:"w-64 p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-8",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center"}),(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Drippy"})]}),(0,s.jsx)(p,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg rounded-2xl",children:(0,s.jsx)(h,{className:"p-4 space-y-2",children:a.map(e=>(0,s.jsxs)(u,{variant:e.active?"default":"ghost",className:"w-full justify-start space-x-3 rounded-xl ".concat(e.active?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600":"text-gray-700 hover:bg-purple-50"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:e.label})]},e.label))})})]})}var eN=a(4824),ev=a(7928);function ej(e){let{userAddress:t}=e,[a,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)({});(0,r.useEffect)(()=>{c()},[t]);let c=async()=>{i(!0);try{let e=[],a=new Set;a.add(t.toLowerCase());for(let s=1;s<=50;s++)try{let r=await J.getPost(s);if(r&&!a.has(r.author.toLowerCase())){a.add(r.author.toLowerCase());try{let a=await J.getProfile(r.author),s=await J.isFollowing(t,r.author);if(a&&a.username){let t="";if(a.avatarIPFSHash)try{t=await E(a.avatarIPFSHash)||""}catch(e){console.log("Could not load avatar for user:",a.username)}if(e.push({address:r.author,username:a.username,bio:a.bio||"Web3 creator",avatar:t,isFollowing:s}),e.length>=5)break}}catch(e){console.log("Could not fetch profile for:",r.author)}}}catch(e){continue}n(e);let s={};e.forEach(e=>{s[e.address]=e.isFollowing}),d(s)}catch(e){console.error("Error loading real users:",e)}finally{i(!1)}},f=async e=>{try{let t=o[e];d(a=>({...a,[e]:!t})),t?await J.unfollow(e):await J.follow(e)}catch(t){console.error("Error following/unfollowing user:",t),d(t=>({...t,[e]:!t[e]}))}};return l?(0,s.jsxs)(p,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg rounded-2xl",children:[(0,s.jsx)(m,{children:(0,s.jsx)(x,{className:"text-lg font-semibold",children:"Discover Users"})}),(0,s.jsx)(h,{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 animate-pulse",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-1"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},e))})]}):0===a.length?(0,s.jsxs)(p,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg rounded-2xl",children:[(0,s.jsx)(m,{children:(0,s.jsx)(x,{className:"text-lg font-semibold",children:"Discover Users"})}),(0,s.jsxs)(h,{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDC65"})}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"No other users found yet"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Be the first to create content!"})]})]}):(0,s.jsxs)(p,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg rounded-2xl",children:[(0,s.jsx)(m,{children:(0,s.jsx)(x,{className:"text-lg font-semibold",children:"Discover Users"})}),(0,s.jsx)(h,{className:"space-y-4",children:a.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(k,{className:"w-10 h-10 border-2 border-purple-200",children:[(0,s.jsx)(S,{src:e.avatar||"/placeholder.svg"}),(0,s.jsx)(D,{className:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-600",children:null===(t=e.username[0])||void 0===t?void 0:t.toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"font-semibold text-sm text-gray-900 truncate",children:["@",e.username]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.bio})]}),(0,s.jsx)(u,{size:"sm",variant:o[e.address]?"outline":"default",onClick:()=>f(e.address),className:"".concat(o[e.address]?"text-gray-600 hover:text-red-600 hover:border-red-300":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white"),children:o[e.address]?(0,s.jsx)(eN.Z,{className:"w-4 h-4"}):(0,s.jsx)(ev.Z,{className:"w-4 h-4"})})]},e.address)})})]})}function eC(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[p,m]=(0,r.useState)(0),x=async e=>{t(!0),i(e),d(!0);try{let t=await J.getProfile(e);n(!!t),u(t)}catch(e){console.error("Error checking profile:",e),n(!1),u(null)}finally{d(!1)}},f=async()=>{n(!0);try{let e=await J.getProfile(l);u(e)}catch(e){console.error("Error fetching profile:",e)}};return o?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading your profile..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50",children:e?a?(0,s.jsxs)("div",{className:"flex max-w-7xl mx-auto",children:[(0,s.jsx)(ew,{userAddress:l}),(0,s.jsx)("main",{className:"flex-1 p-6 space-y-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsx)(eh,{userAddress:l,onPostCreated:()=>{m(e=>e+1)}}),(0,s.jsx)(eu,{userAddress:l,refreshTrigger:p})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(eg,{userAddress:l,profileData:c}),(0,s.jsx)(ej,{userAddress:l})]})]})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,s.jsx)(Y,{userAddress:l,onProfileCreated:f})}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(b,{onConnect:x})})})})}}},function(e){e.O(0,[711,24,240,744],function(){return e(e.s=3949)}),_N_E=e.O()}]);